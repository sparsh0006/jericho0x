{"version":3,"sources":["../src/actions/remoteAttestation.ts","../src/index.ts"],"sourcesContent":["import type { IAgentRuntime, Memory, State, HandlerCallback } from \"@elizaos/core\";\r\n\r\nexport const remoteAttestationAction = {\r\n    name: \"REMOTE_ATTESTATION\",\r\n    similes: [\"REMOTE_ATTESTATION\", \"TEE_REMOTE_ATTESTATION\", \"TEE_ATTESTATION\"],\r\n    description: \"Generate a remote attestation to prove that the agent is running in a TEE\",\r\n    handler: async (\r\n        runtime: IAgentRuntime,\r\n        message: Memory,\r\n        _state: State,\r\n        _options: any,\r\n        callback: HandlerCallback,\r\n    ) => {\r\n        try {\r\n            const endpoint = runtime.getSetting(\"TEE_MARLIN_ATTESTATION_ENDPOINT\") ?? \"http://127.0.0.1:1350\";\r\n            const response = await fetch(`${endpoint}/attestation/hex`);\r\n            callback({\r\n                text: `Here you go - ${await response.text()}`,\r\n                action: \"NONE\",\r\n            });\r\n            return true;\r\n        } catch (error) {\r\n            console.error(\"Failed to fetch remote attestation: \", error);\r\n            return false;\r\n        }\r\n    },\r\n    validate: async (_runtime: IAgentRuntime) => {\r\n        return true;\r\n    },\r\n    examples: [\r\n        [\r\n            {\r\n                user: \"user\",\r\n                content: {\r\n                    text: \"Attest yourself\",\r\n                    action: \"REMOTE_ATTESTATION\",\r\n                },\r\n            },\r\n            {\r\n                user: \"user\",\r\n                content: {\r\n                    text: \"Generate a remote attestation\",\r\n                    action: \"REMOTE_ATTESTATION\",\r\n                },\r\n            },\r\n        ],\r\n    ],\r\n};\r\n","import { Plugin } from \"@elizaos/core\";\r\nimport { remoteAttestationAction } from \"./actions/remoteAttestation\";\r\n\r\nexport const teeMarlinPlugin: Plugin = {\r\n    name: \"Marlin TEE Plugin\",\r\n    description:\r\n        \"TEE plugin with actions to generate remote attestations\",\r\n    actions: [\r\n        /* custom actions */\r\n        remoteAttestationAction,\r\n    ],\r\n    evaluators: [\r\n        /* custom evaluators */\r\n    ],\r\n    providers: [\r\n        /* custom providers */\r\n    ],\r\n    services: [\r\n        /* custom services */\r\n    ],\r\n};\r\n"],"mappings":";AAEO,IAAM,0BAA0B;AAAA,EACnC,MAAM;AAAA,EACN,SAAS,CAAC,sBAAsB,0BAA0B,iBAAiB;AAAA,EAC3E,aAAa;AAAA,EACb,SAAS,OACL,SACA,SACA,QACA,UACA,aACC;AACD,QAAI;AACA,YAAM,WAAW,QAAQ,WAAW,iCAAiC,KAAK;AAC1E,YAAM,WAAW,MAAM,MAAM,GAAG,QAAQ,kBAAkB;AAC1D,eAAS;AAAA,QACL,MAAM,iBAAiB,MAAM,SAAS,KAAK,CAAC;AAAA,QAC5C,QAAQ;AAAA,MACZ,CAAC;AACD,aAAO;AAAA,IACX,SAAS,OAAO;AACZ,cAAQ,MAAM,wCAAwC,KAAK;AAC3D,aAAO;AAAA,IACX;AAAA,EACJ;AAAA,EACA,UAAU,OAAO,aAA4B;AACzC,WAAO;AAAA,EACX;AAAA,EACA,UAAU;AAAA,IACN;AAAA,MACI;AAAA,QACI,MAAM;AAAA,QACN,SAAS;AAAA,UACL,MAAM;AAAA,UACN,QAAQ;AAAA,QACZ;AAAA,MACJ;AAAA,MACA;AAAA,QACI,MAAM;AAAA,QACN,SAAS;AAAA,UACL,MAAM;AAAA,UACN,QAAQ;AAAA,QACZ;AAAA,MACJ;AAAA,IACJ;AAAA,EACJ;AACJ;;;AC5CO,IAAM,kBAA0B;AAAA,EACnC,MAAM;AAAA,EACN,aACI;AAAA,EACJ,SAAS;AAAA;AAAA,IAEL;AAAA,EACJ;AAAA,EACA,YAAY;AAAA;AAAA,EAEZ;AAAA,EACA,WAAW;AAAA;AAAA,EAEX;AAAA,EACA,UAAU;AAAA;AAAA,EAEV;AACJ;","names":[]}