{"version":3,"sources":["../../../node_modules/@jspm/core/nodelibs/browser/process.js","../src/actions/transfer.ts","../src/providers/wallet.ts","../src/utils/amount.ts","../src/enviroment.ts","../src/utils/schemas.ts","../src/actions/createToken.ts","../src/index.ts"],"sourcesContent":["function unimplemented(name) {\r\n  throw new Error('Node.js process ' + name + ' is not supported by JSPM core outside of Node.js');\r\n}\r\n\r\nvar queue = [];\r\nvar draining = false;\r\nvar currentQueue;\r\nvar queueIndex = -1;\r\n\r\nfunction cleanUpNextTick() {\r\n  if (!draining || !currentQueue)\r\n    return;\r\n  draining = false;\r\n  if (currentQueue.length) {\r\n    queue = currentQueue.concat(queue);\r\n  }\r\n  else {\r\n    queueIndex = -1;\r\n  }\r\n  if (queue.length)\r\n    drainQueue();\r\n}\r\n\r\nfunction drainQueue() {\r\n  if (draining)\r\n    return;\r\n  var timeout = setTimeout(cleanUpNextTick, 0);\r\n  draining = true;\r\n\r\n  var len = queue.length;\r\n  while(len) {\r\n    currentQueue = queue;\r\n    queue = [];\r\n    while (++queueIndex < len) {\r\n      if (currentQueue)\r\n        currentQueue[queueIndex].run();\r\n    }\r\n    queueIndex = -1;\r\n    len = queue.length;\r\n  }\r\n  currentQueue = null;\r\n  draining = false;\r\n  clearTimeout(timeout);\r\n}\r\n\r\nfunction nextTick (fun) {\r\n  var args = new Array(arguments.length - 1);\r\n  if (arguments.length > 1) {\r\n    for (var i = 1; i < arguments.length; i++)\r\n      args[i - 1] = arguments[i];\r\n  }\r\n  queue.push(new Item(fun, args));\r\n  if (queue.length === 1 && !draining)\r\n    setTimeout(drainQueue, 0);\r\n}\r\n// v8 likes predictible objects\r\nfunction Item(fun, array) {\r\n  this.fun = fun;\r\n  this.array = array;\r\n}\r\nItem.prototype.run = function () {\r\n  this.fun.apply(null, this.array);\r\n};\r\n\r\nvar title = 'browser';\r\nvar arch = 'x64';\r\nvar platform = 'browser';\r\nvar env = {\r\n  PATH: '/usr/bin',\r\n  LANG: typeof navigator !== 'undefined' ? navigator.language + '.UTF-8' : undefined,\r\n  PWD: '/',\r\n  HOME: '/home',\r\n  TMP: '/tmp',\r\n};\r\nvar argv = ['/usr/bin/node'];\r\nvar execArgv = [];\r\nvar version = 'v16.8.0';\r\nvar versions = {};\r\n\r\nvar emitWarning = function(message, type) {\r\n  console.warn((type ? (type + ': ') : '') + message);\r\n};\r\n\r\nvar binding = function(name) { unimplemented('binding'); };\r\n\r\nvar umask = function(mask) { return 0; };\r\n\r\nvar cwd = function() { return '/'; };\r\nvar chdir = function(dir) {};\r\n\r\nvar release = {\r\n  name: 'node',\r\n  sourceUrl: '',\r\n  headersUrl: '',\r\n  libUrl: '',\r\n};\r\n\r\nfunction noop() {}\r\n\r\nvar browser = true;\r\nvar _rawDebug = noop;\r\nvar moduleLoadList = [];\r\nfunction _linkedBinding(name) { unimplemented('_linkedBinding'); }\r\nvar domain = {};\r\nvar _exiting = false;\r\nvar config = {};\r\nfunction dlopen(name) { unimplemented('dlopen'); }\r\nfunction _getActiveRequests() { return []; }\r\nfunction _getActiveHandles() { return []; }\r\nvar reallyExit = noop;\r\nvar _kill = noop;\r\nvar cpuUsage = function() { return {}; };\r\nvar resourceUsage = cpuUsage;\r\nvar memoryUsage = cpuUsage;\r\nvar kill = noop;\r\nvar exit = noop;\r\nvar openStdin = noop;\r\nvar allowedNodeEnvironmentFlags = {};\r\nfunction assert(condition, message) {\r\n  if (!condition) throw new Error(message || 'assertion error');\r\n}\r\nvar features = {\r\n  inspector: false,\r\n  debug: false,\r\n  uv: false,\r\n  ipv6: false,\r\n  tls_alpn: false,\r\n  tls_sni: false,\r\n  tls_ocsp: false,\r\n  tls: false,\r\n  cached_builtins: true,\r\n};\r\nvar _fatalExceptions = noop;\r\nvar setUncaughtExceptionCaptureCallback = noop;\r\nfunction hasUncaughtExceptionCaptureCallback() { return false; }var _tickCallback = noop;\r\nvar _debugProcess = noop;\r\nvar _debugEnd = noop;\r\nvar _startProfilerIdleNotifier = noop;\r\nvar _stopProfilerIdleNotifier = noop;\r\nvar stdout = undefined;\r\nvar stderr = undefined;\r\nvar stdin = undefined;\r\nvar abort = noop;\r\nvar pid = 2;\r\nvar ppid = 1;\r\nvar execPath = '/bin/usr/node';\r\nvar debugPort = 9229;\r\nvar argv0 = 'node';\r\nvar _preload_modules = [];\r\nvar setSourceMapsEnabled = noop;\r\n\r\nvar _performance = {\r\n  now: typeof performance !== 'undefined' ? performance.now.bind(performance) : undefined,\r\n  timing: typeof performance !== 'undefined' ? performance.timing : undefined,\r\n};\r\nif (_performance.now === undefined) {\r\n  var nowOffset = Date.now();\r\n\r\n  if (_performance.timing && _performance.timing.navigationStart) {\r\n    nowOffset = _performance.timing.navigationStart;\r\n  }\r\n  _performance.now = () => Date.now() - nowOffset;\r\n}\r\n\r\nfunction uptime() {\r\n  return _performance.now() / 1000;\r\n}\r\n\r\nvar nanoPerSec = 1000000000;\r\nfunction hrtime(previousTimestamp) {\r\n  var baseNow = Math.floor((Date.now() - _performance.now()) * 1e-3);\r\n  var clocktime = _performance.now() * 1e-3;\r\n  var seconds = Math.floor(clocktime) + baseNow;\r\n  var nanoseconds = Math.floor((clocktime % 1) * 1e9);\r\n  if (previousTimestamp) {\r\n    seconds = seconds - previousTimestamp[0];\r\n    nanoseconds = nanoseconds - previousTimestamp[1];\r\n    if (nanoseconds < 0) {\r\n      seconds--;\r\n      nanoseconds += nanoPerSec;\r\n    }\r\n  }\r\n  return [seconds, nanoseconds];\r\n}hrtime.bigint = function(time) {\r\n  var diff = hrtime(time);\r\n  if (typeof BigInt === 'undefined') {\r\n    return diff[0] * nanoPerSec + diff[1];\r\n  }\r\n  return BigInt(diff[0] * nanoPerSec) + BigInt(diff[1]);\r\n};\r\n\r\nvar _maxListeners = 10;\r\nvar _events = {};\r\nvar _eventsCount = 0;\r\nfunction on () { return process }var addListener = on;\r\nvar once = on;\r\nvar off = on;\r\nvar removeListener = on;\r\nvar removeAllListeners = on;\r\nvar emit = noop;\r\nvar prependListener = on;\r\nvar prependOnceListener = on;\r\nfunction listeners (name) { return []; }\r\nvar process = {\r\n  version,\r\n  versions,\r\n  arch,\r\n  platform,\r\n  browser,\r\n  release,\r\n  _rawDebug,\r\n  moduleLoadList,\r\n  binding,\r\n  _linkedBinding,\r\n  _events,\r\n  _eventsCount,\r\n  _maxListeners,\r\n  on,\r\n  addListener,\r\n  once,\r\n  off,\r\n  removeListener,\r\n  removeAllListeners,\r\n  emit,\r\n  prependListener,\r\n  prependOnceListener,\r\n  listeners,\r\n  domain,\r\n  _exiting,\r\n  config,\r\n  dlopen,\r\n  uptime,\r\n  _getActiveRequests,\r\n  _getActiveHandles,\r\n  reallyExit,\r\n  _kill,\r\n  cpuUsage,\r\n  resourceUsage,\r\n  memoryUsage,\r\n  kill,\r\n  exit,\r\n  openStdin,\r\n  allowedNodeEnvironmentFlags,\r\n  assert,\r\n  features,\r\n  _fatalExceptions,\r\n  setUncaughtExceptionCaptureCallback,\r\n  hasUncaughtExceptionCaptureCallback,\r\n  emitWarning,\r\n  nextTick,\r\n  _tickCallback,\r\n  _debugProcess,\r\n  _debugEnd,\r\n  _startProfilerIdleNotifier,\r\n  _stopProfilerIdleNotifier,\r\n  stdout,\r\n  stdin,\r\n  stderr,\r\n  abort,\r\n  umask,\r\n  chdir,\r\n  cwd,\r\n  env,\r\n  title,\r\n  argv,\r\n  execArgv,\r\n  pid,\r\n  ppid,\r\n  execPath,\r\n  debugPort,\r\n  hrtime,\r\n  argv0,\r\n  _preload_modules,\r\n  setSourceMapsEnabled,\r\n};\n\nexport { _debugEnd, _debugProcess, _events, _eventsCount, _exiting, _fatalExceptions, _getActiveHandles, _getActiveRequests, _kill, _linkedBinding, _maxListeners, _preload_modules, _rawDebug, _startProfilerIdleNotifier, _stopProfilerIdleNotifier, _tickCallback, abort, addListener, allowedNodeEnvironmentFlags, arch, argv, argv0, assert, binding, browser, chdir, config, cpuUsage, cwd, debugPort, process as default, dlopen, domain, emit, emitWarning, env, execArgv, execPath, exit, features, hasUncaughtExceptionCaptureCallback, hrtime, kill, listeners, memoryUsage, moduleLoadList, nextTick, off, on, once, openStdin, pid, platform, ppid, prependListener, prependOnceListener, reallyExit, release, removeAllListeners, removeListener, resourceUsage, setSourceMapsEnabled, setUncaughtExceptionCaptureCallback, stderr, stdin, stdout, title, umask, uptime, version, versions };\n","import {\r\n    elizaLogger,\r\n    ActionExample,\r\n    Content,\r\n    HandlerCallback,\r\n    IAgentRuntime,\r\n    Memory,\r\n    ModelClass,\r\n    State,\r\n    composeContext,\r\n    generateObject,\r\n    type Action,\r\n} from \"@elizaos/core\";\r\nimport { WalletProvider } from \"../providers/wallet\";\r\nimport { validateMultiversxConfig } from \"../enviroment\";\r\nimport { transferSchema } from \"../utils/schemas\";\r\nexport interface TransferContent extends Content {\r\n    tokenAddress: string;\r\n    amount: string;\r\n    tokenIdentifier?: string;\r\n}\r\n\r\nfunction isTransferContent(_runtime: IAgentRuntime, content: TransferContent) {\r\n    console.log(\"Content for transfer\", content);\r\n    return (\r\n        typeof content.tokenAddress === \"string\" &&\r\n        typeof content.amount === \"string\"\r\n    );\r\n}\r\n\r\nconst transferTemplate = `Respond with a JSON markdown block containing only the extracted values. Use null for any values that cannot be determined.\r\n\r\nExample response:\r\n\\`\\`\\`json\r\n{\r\n    \"tokenAddress\": \"erd12r22hx2q4jjt8e0gukxt5shxqjp9ys5nwdtz0gpds25zf8qwtjdqyzfgzm\",\r\n    \"amount\": \"1\",\r\n    \"tokenIdentifier\": \"PEPE-3eca7c\"\r\n}\r\n\\`\\`\\`\r\n\r\n{{recentMessages}}\r\n\r\nGiven the recent messages, extract the following information about the requested token transfer:\r\n- Token address\r\n- Amount to transfer\r\n- Token identifier\r\n\r\nRespond with a JSON markdown block containing only the extracted values.`;\r\n\r\nexport default {\r\n    name: \"SEND_TOKEN\",\r\n    similes: [\r\n        \"TRANSFER_TOKEN\",\r\n        \"TRANSFER_TOKENS\",\r\n        \"SEND_TOKENS\",\r\n        \"SEND_EGLD\",\r\n        \"PAY\",\r\n    ],\r\n    validate: async (runtime: IAgentRuntime, message: Memory) => {\r\n        console.log(\"Validating config for user:\", message.userId);\r\n        await validateMultiversxConfig(runtime);\r\n        return true;\r\n    },\r\n    description: \"Transfer tokens from the agent wallet to another address\",\r\n    handler: async (\r\n        runtime: IAgentRuntime,\r\n        message: Memory,\r\n        state: State,\r\n        _options: { [key: string]: unknown },\r\n        callback?: HandlerCallback\r\n    ) => {\r\n        elizaLogger.log(\"Starting SEND_TOKEN handler...\");\r\n\r\n        // Initialize or update state\r\n        if (!state) {\r\n            state = (await runtime.composeState(message)) as State;\r\n        } else {\r\n            state = await runtime.updateRecentMessageState(state);\r\n        }\r\n\r\n        // Compose transfer context\r\n        const transferContext = composeContext({\r\n            state,\r\n            template: transferTemplate,\r\n        });\r\n\r\n        // Generate transfer content\r\n        const content = await generateObject({\r\n            runtime,\r\n            context: transferContext,\r\n            modelClass: ModelClass.SMALL,\r\n            schema: transferSchema,\r\n        });\r\n\r\n        const payload = content.object as TransferContent;\r\n\r\n        // Validate transfer content\r\n        if (!isTransferContent(runtime, payload)) {\r\n            console.error(\"Invalid content for TRANSFER_TOKEN action.\");\r\n            if (callback) {\r\n                callback({\r\n                    text: \"Unable to process transfer request. Invalid content provided.\",\r\n                    content: { error: \"Invalid transfer content\" },\r\n                });\r\n            }\r\n            return false;\r\n        }\r\n\r\n        try {\r\n            const privateKey = runtime.getSetting(\"MVX_PRIVATE_KEY\");\r\n            const network = runtime.getSetting(\"MVX_NETWORK\");\r\n\r\n            const walletProvider = new WalletProvider(privateKey, network);\r\n\r\n            if (\r\n                payload.tokenIdentifier &&\r\n                payload.tokenIdentifier.toLowerCase() !== \"egld\"\r\n            ) {\r\n                await walletProvider.sendESDT({\r\n                    receiverAddress: payload.tokenAddress,\r\n                    amount: payload.amount,\r\n                    identifier: payload.tokenIdentifier,\r\n                });\r\n                return true;\r\n            }\r\n\r\n            await walletProvider.sendEGLD({\r\n                receiverAddress: payload.tokenAddress,\r\n                amount: payload.amount,\r\n            });\r\n            return true;\r\n        } catch (error) {\r\n            console.error(\"Error during token transfer:\", error);\r\n            if (callback) {\r\n                callback({\r\n                    text: `Error transferring tokens: ${error.message}`,\r\n                    content: { error: error.message },\r\n                });\r\n            }\r\n            return \"\";\r\n        }\r\n    },\r\n\r\n    examples: [\r\n        [\r\n            {\r\n                user: \"{{user1}}\",\r\n                content: {\r\n                    text: \"Send 1 EGLD to erd12r22hx2q4jjt8e0gukxt5shxqjp9ys5nwdtz0gpds25zf8qwtjdqyzfgzm\",\r\n                },\r\n            },\r\n            {\r\n                user: \"{{user2}}\",\r\n                content: {\r\n                    text: \"I'll send 1 EGLD tokens now...\",\r\n                    action: \"SEND_TOKEN\",\r\n                },\r\n            },\r\n        ],\r\n        [\r\n            {\r\n                user: \"{{user1}}\",\r\n                content: {\r\n                    text: \"Send 1 TST-a8b23d to erd12r22hx2q4jjt8e0gukxt5shxqjp9ys5nwdtz0gpds25zf8qwtjdqyzfgzm\",\r\n                },\r\n            },\r\n            {\r\n                user: \"{{user2}}\",\r\n                content: {\r\n                    text: \"I'll send 1 TST-a8b23d tokens now...\",\r\n                    action: \"SEND_TOKEN\",\r\n                },\r\n            },\r\n        ],\r\n    ] as ActionExample[][],\r\n} as Action;\r\n","import { elizaLogger } from \"@elizaos/core\";\r\nimport {\r\n    UserSigner,\r\n    Address,\r\n    TransactionComputer,\r\n    ApiNetworkProvider,\r\n    UserSecretKey,\r\n    TokenTransfer,\r\n    TransferTransactionsFactory,\r\n    TransactionsFactoryConfig,\r\n    Token,\r\n    Transaction,\r\n    TokenManagementTransactionsFactory,\r\n} from \"@multiversx/sdk-core\";\r\nimport { denominateAmount } from \"../utils/amount\";\r\n\r\n// Network configuration object for different environments (mainnet, devnet, testnet)\r\nconst MVX_NETWORK_CONFIG = {\r\n    mainnet: {\r\n        chainID: \"1\", // Mainnet chain ID\r\n        apiURL: \"https://api.multiversx.com\", // Mainnet API URL\r\n        explorerURL: \"https://explorer.multiversx.com\",\r\n    },\r\n    devnet: {\r\n        chainID: \"D\", // Devnet chain ID\r\n        apiURL: \"https://devnet-api.multiversx.com\", // Devnet API URL,\r\n        explorerURL: \"https://devnet-explorer.multiversx.com\",\r\n    },\r\n    testnet: {\r\n        chainID: \"T\", // Testnet chain ID\r\n        apiURL: \"https://testnet-api.multiversx.com\", // Testnet API URL\r\n        explorerURL: \"https://testnet-explorer.multiversx.com\",\r\n    },\r\n};\r\n\r\n// WalletProvider class handles wallet-related operations, such as signing transactions, retrieving balance, and sending tokens\r\nexport class WalletProvider {\r\n    private signer: UserSigner; // Handles cryptographic signing\r\n    private apiNetworkProvider: ApiNetworkProvider; // Interacts with the MultiversX network\r\n    private chainID: string; // Current network chain ID\r\n    private explorerURL: string; // Current network explorer URL\r\n\r\n    /**\r\n     * Constructor to initialize WalletProvider with a private key and network configuration\r\n     * @param privateKey - User's private key for signing transactions\r\n     * @param network - Target network (mainnet, devnet, or testnet)\r\n     */\r\n    constructor(privateKey: string, network: string) {\r\n        if (!MVX_NETWORK_CONFIG[network]) {\r\n            throw new Error(`Unsupported network: ${network}`); // Validate network\r\n        }\r\n\r\n        const networkConfig = MVX_NETWORK_CONFIG[network];\r\n        this.chainID = networkConfig.chainID;\r\n        this.explorerURL = networkConfig.explorerURL;\r\n\r\n        // Initialize the signer with the user's private key\r\n        const secretKey = UserSecretKey.fromString(privateKey);\r\n        this.signer = new UserSigner(secretKey);\r\n\r\n        // Set up the network provider for API interactions\r\n        this.apiNetworkProvider = new ApiNetworkProvider(networkConfig.apiURL, {\r\n            clientName: \"eliza-mvx\",\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Retrieve the wallet address derived from the private key\r\n     * @returns Address object\r\n     */\r\n    public getAddress(): Address {\r\n        return this.signer.getAddress();\r\n    }\r\n\r\n    /**\r\n     * Fetch the wallet's current EGLD balance\r\n     * @returns Promise resolving to the wallet's balance as a string\r\n     */\r\n    public async getBalance(): Promise<string> {\r\n        const address = new Address(this.getAddress());\r\n        const account = await this.apiNetworkProvider.getAccount(address);\r\n        return account.balance.toString(); // Return balance as a string\r\n    }\r\n\r\n    /**\r\n     * Sign a transaction using the wallet's private key\r\n     * @param transaction - The transaction object to sign\r\n     * @returns The transaction signature as a string\r\n     */\r\n    public async signTransaction(transaction: Transaction) {\r\n        const computer = new TransactionComputer();\r\n        const serializedTx = computer.computeBytesForSigning(transaction); // Prepare transaction for signing\r\n        const signature = await this.signer.sign(serializedTx); // Sign the transaction\r\n        return signature;\r\n    }\r\n\r\n    /**\r\n     * Send EGLD tokens to another wallet\r\n     * @param receiverAddress - Recipient's wallet address\r\n     * @param amount - Amount of EGLD to send\r\n     * @returns Transaction hash as a string\r\n     */\r\n    public async sendEGLD({\r\n        receiverAddress,\r\n        amount,\r\n    }: {\r\n        receiverAddress: string;\r\n        amount: string;\r\n    }): Promise<string> {\r\n        try {\r\n            const receiver = new Address(receiverAddress);\r\n            const value = denominateAmount({ amount, decimals: 18 }); // Convert amount to the smallest unit\r\n            const senderAddress = this.getAddress();\r\n\r\n            // Prepare the transaction factory with the current chain ID\r\n            const factoryConfig = new TransactionsFactoryConfig({\r\n                chainID: this.chainID,\r\n            });\r\n            const factory = new TransferTransactionsFactory({\r\n                config: factoryConfig,\r\n            });\r\n\r\n            // Create a native EGLD transfer transaction\r\n            const transaction = factory.createTransactionForNativeTokenTransfer(\r\n                {\r\n                    sender: this.getAddress(),\r\n                    receiver: receiver,\r\n                    nativeAmount: BigInt(value),\r\n                }\r\n            );\r\n\r\n            // Get the sender's account details to set the nonce\r\n            const account =\r\n                await this.apiNetworkProvider.getAccount(senderAddress);\r\n            transaction.nonce = BigInt(account.nonce);\r\n\r\n            // Sign the transaction\r\n            const signature = await this.signTransaction(transaction);\r\n            transaction.signature = signature;\r\n\r\n            // Broadcast the transaction to the network\r\n            const txHash =\r\n                await this.apiNetworkProvider.sendTransaction(transaction);\r\n\r\n            elizaLogger.log(`TxHash: ${txHash}`); // Log transaction hash\r\n            elizaLogger.log(\r\n                `Transaction URL: ${this.explorerURL}/transactions/${txHash}`\r\n            ); // View Transaction\r\n            return txHash;\r\n        } catch (error) {\r\n            console.error(\"Error sending EGLD transaction:\", error);\r\n            throw new Error(\r\n                `Failed to send EGLD: ${error.message || \"Unknown error\"}`\r\n            );\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Send ESDT (eStandard Digital Token) tokens to another wallet\r\n     * @param receiverAddress - Recipient's wallet address\r\n     * @param amount - Amount of ESDT to send\r\n     * @param identifier - ESDT token identifier (e.g., PEPE-3eca7c)\r\n     * @returns Transaction hash as a string\r\n     */\r\n    public async sendESDT({\r\n        receiverAddress,\r\n        amount,\r\n        identifier,\r\n    }: {\r\n        receiverAddress: string;\r\n        amount: string;\r\n        identifier: string;\r\n    }): Promise<string> {\r\n        try {\r\n            const address = this.getAddress();\r\n\r\n            // Set up transaction factory for ESDT transfers\r\n            const config = new TransactionsFactoryConfig({\r\n                chainID: this.chainID,\r\n            });\r\n            const factory = new TransferTransactionsFactory({ config });\r\n\r\n            // Retrieve token details to determine the token's decimals\r\n            const token =\r\n                await this.apiNetworkProvider.getFungibleTokenOfAccount(\r\n                    address,\r\n                    identifier\r\n                );\r\n\r\n            // Convert amount to the token's smallest unit\r\n            const value = denominateAmount({\r\n                amount,\r\n                decimals: token.rawResponse.decimals,\r\n            });\r\n\r\n            // Create an ESDT transfer transaction\r\n            const transaction = factory.createTransactionForESDTTokenTransfer({\r\n                sender: this.getAddress(),\r\n                receiver: new Address(receiverAddress),\r\n                tokenTransfers: [\r\n                    new TokenTransfer({\r\n                        token: new Token({ identifier }),\r\n                        amount: BigInt(value),\r\n                    }),\r\n                ],\r\n            });\r\n\r\n            // Set the transaction nonce\r\n            const account = await this.apiNetworkProvider.getAccount(address);\r\n            transaction.nonce = BigInt(account.nonce);\r\n\r\n            // Sign and broadcast the transaction\r\n            const signature = await this.signTransaction(transaction);\r\n            transaction.signature = signature;\r\n            const txHash =\r\n                await this.apiNetworkProvider.sendTransaction(transaction);\r\n\r\n            elizaLogger.log(`TxHash: ${txHash}`); // Log transaction hash\r\n            elizaLogger.log(\r\n                `Transaction URL: ${this.explorerURL}/transactions/${txHash}`\r\n            ); // View Transaction\r\n            return txHash;\r\n        } catch (error) {\r\n            console.error(\"Error sending ESDT transaction:\", error);\r\n            throw new Error(\r\n                `Failed to send ESDT: ${error.message || \"Unknown error\"}`\r\n            );\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Create a new eStandard Digital Token (ESDT).\r\n     * @param tokenName - The name of the token to be created.\r\n     * @param tokenTicker - The ticker symbol for the token.\r\n     * @param amount - The initial supply of the token.\r\n     * @param decimals - The number of decimal places for the token.\r\n     * @returns The transaction hash of the created ESDT.\r\n     */\r\n    public async createESDT({\r\n        tokenName,\r\n        tokenTicker,\r\n        amount,\r\n        decimals,\r\n    }: {\r\n        tokenName: string;\r\n        tokenTicker: string;\r\n        amount: string;\r\n        decimals: number;\r\n    }): Promise<string> {\r\n        try {\r\n            const address = this.getAddress(); // Retrieve the sender's address\r\n\r\n            const factoryConfig = new TransactionsFactoryConfig({\r\n                chainID: this.chainID, // Set the chain ID for the transaction factory\r\n            });\r\n            const factory = new TokenManagementTransactionsFactory({\r\n                config: factoryConfig, // Initialize the factory with the configuration\r\n            });\r\n\r\n            const totalSupply = denominateAmount({ amount, decimals });\r\n\r\n            // Create a transaction for issuing a fungible token\r\n            const transaction = factory.createTransactionForIssuingFungible({\r\n                sender: new Address(address), // Specify the sender's address\r\n                tokenName, // Name of the token\r\n                tokenTicker: tokenTicker.toUpperCase(), // Token ticker in uppercase\r\n                initialSupply: BigInt(totalSupply), // Initial supply as a BigInt\r\n                numDecimals: BigInt(decimals), // Number of decimals as a BigInt\r\n                canFreeze: false, // Token cannot be frozen\r\n                canWipe: false, // Token cannot be wiped\r\n                canPause: false, // Token cannot be paused\r\n                canChangeOwner: true, // Ownership can be changed\r\n                canUpgrade: true, // Token can be upgraded\r\n                canAddSpecialRoles: true, // Special roles can be added\r\n            });\r\n\r\n            // Fetch the account details to set the nonce\r\n            const account = await this.apiNetworkProvider.getAccount(address);\r\n            transaction.nonce = BigInt(account.nonce); // Set the nonce for the transaction\r\n\r\n            const signature = await this.signTransaction(transaction); // Sign the transaction\r\n            transaction.signature = signature; // Attach the signature to the transaction\r\n\r\n            // Send the transaction to the network and get the transaction hash\r\n            const txHash =\r\n                await this.apiNetworkProvider.sendTransaction(transaction);\r\n\r\n            elizaLogger.log(`TxHash: ${txHash}`); // Log the transaction hash\r\n            elizaLogger.log(\r\n                `Transaction URL: ${this.explorerURL}/transactions/${txHash}`\r\n            ); // View Transaction\r\n\r\n            return txHash; // Return the transaction hash\r\n        } catch (error) {\r\n            console.error(\"Error creating ESDT:\", error);\r\n            throw new Error(\r\n                `Failed to create ESDT: ${error.message || \"Unknown error\"}`\r\n            ); // Throw an error if creation fails\r\n        }\r\n    }\r\n}\r\n","import BigNumber from \"bignumber.js\";\r\n\r\nBigNumber.config({ ROUNDING_MODE: BigNumber.ROUND_FLOOR });\r\n\r\ntype PayloadType = {\r\n    amount: string;\r\n    decimals: number;\r\n};\r\n\r\nexport const denominateAmount = ({ amount, decimals }: PayloadType) => {\r\n    return new BigNumber(amount)\r\n        .shiftedBy(decimals)\r\n        .decimalPlaces(0)\r\n        .toFixed(0);\r\n};\r\n","import { IAgentRuntime } from \"@elizaos/core\";\r\nimport { z } from \"zod\";\r\n\r\nexport const multiversxEnvSchema = z.object({\r\n    MVX_PRIVATE_KEY: z\r\n        .string()\r\n        .min(1, \"MultiversX wallet private key is required\"),\r\n    MVX_NETWORK: z.enum([\"mainnet\", \"devnet\", \"testnet\"]),\r\n});\r\n\r\nexport type MultiversxConfig = z.infer<typeof multiversxEnvSchema>;\r\n\r\nexport async function validateMultiversxConfig(\r\n    runtime: IAgentRuntime\r\n): Promise<MultiversxConfig> {\r\n    try {\r\n        const config = {\r\n            MVX_PRIVATE_KEY:\r\n                runtime.getSetting(\"MVX_PRIVATE_KEY\") ||\r\n                process.env.MVX_PRIVATE_KEY,\r\n            MVX_NETWORK:\r\n                runtime.getSetting(\"MVX_NETWORK\") || process.env.MVX_NETWORK,\r\n        };\r\n\r\n        return multiversxEnvSchema.parse(config);\r\n    } catch (error) {\r\n        if (error instanceof z.ZodError) {\r\n            const errorMessages = error.errors\r\n                .map((err) => `${err.path.join(\".\")}: ${err.message}`)\r\n                .join(\"\\n\");\r\n            throw new Error(\r\n                `MultiversX configuration validation failed:\\n${errorMessages}`\r\n            );\r\n        }\r\n        throw error;\r\n    }\r\n}\r\n","import { z } from \"zod\";\r\n\r\nexport const createTokenSchema = z.object({\r\n    tokenName: z.string().min(1, { message: \"Token name is required.\" }),\r\n    tokenTicker: z.string().min(1, { message: \"Token ticker is required.\" }),\r\n    amount: z\r\n        .number()\r\n        .positive({ message: \"Amount must be a positive number.\" }),\r\n    decimals: z\r\n        .number()\r\n        .int()\r\n        .min(0, { message: \"Decimals must be at least 0\" })\r\n        .max(18, { message: \"Decimals must be at most 18\" })\r\n        .nullable()\r\n        .optional(),\r\n});\r\n\r\nexport const transferSchema = z.object({\r\n    tokenAddress: z.string().min(1, { message: \"Token address is required.\" }),\r\n    amount: z.string().min(1, { message: \"Amount is required.\" }),\r\n    tokenIdentifier: z\r\n        .string()\r\n        .transform((val) => (val === \"null\" ? null : val))\r\n        .nullable()\r\n        .optional(),\r\n});\r\n","import {\r\n    elizaLogger,\r\n    ActionExample,\r\n    Content,\r\n    HandlerCallback,\r\n    IAgentRuntime,\r\n    Memory,\r\n    ModelClass,\r\n    State,\r\n    generateObject,\r\n    composeContext,\r\n    type Action,\r\n} from \"@elizaos/core\";\r\nimport { WalletProvider } from \"../providers/wallet\";\r\nimport { validateMultiversxConfig } from \"../enviroment\";\r\nimport { createTokenSchema } from \"../utils/schemas\";\r\nexport interface CreateTokenContent extends Content {\r\n    tokenName: string;\r\n    tokenTicker: string;\r\n    decimals: string;\r\n    amount: string;\r\n}\r\n\r\nfunction isCreateTokenContent(\r\n    runtime: IAgentRuntime,\r\n    content: CreateTokenContent\r\n) {\r\n    console.log(\"Content for create token\", content);\r\n    return content.tokenName && content.tokenName && content.tokenName;\r\n}\r\n\r\nconst createTokenTemplate = `Respond with a JSON markdown block containing only the extracted values. Use null for any values that cannot be determined.\r\n\r\nExample response:\r\n\\`\\`\\`json\r\n{\r\n    \"tokenName\": \"TEST\",\r\n    \"tokenTicker\": \"TST\",\r\n    \"amount: 100,\r\n    \"decimals\": 18\r\n}\r\n\\`\\`\\`\r\n\r\n{{recentMessages}}\r\n\r\nGiven the recent messages, extract the following information about the requested token creation:\r\n- Token name\r\n- Token ticker\r\n- Amount\r\n- Decimals\r\n\r\nRespond with a JSON markdown block containing only the extracted values.`;\r\n\r\nexport default {\r\n    name: \"CREATE_TOKEN\",\r\n    similes: [\"DEPLOY_TOKEN\"],\r\n    validate: async (runtime: IAgentRuntime, message: Memory) => {\r\n        console.log(\"Validating config for user:\", message.userId);\r\n        await validateMultiversxConfig(runtime);\r\n        return true;\r\n    },\r\n    description: \"Create a new token.\",\r\n    handler: async (\r\n        runtime: IAgentRuntime,\r\n        message: Memory,\r\n        state: State,\r\n        _options: { [key: string]: unknown },\r\n        callback?: HandlerCallback\r\n    ) => {\r\n        elizaLogger.log(\"Starting CREATE_TOKEN handler...\");\r\n\r\n        // Initialize or update state\r\n        if (!state) {\r\n            state = (await runtime.composeState(message)) as State;\r\n        } else {\r\n            state = await runtime.updateRecentMessageState(state);\r\n        }\r\n\r\n        // Compose transfer context\r\n        const transferContext = composeContext({\r\n            state,\r\n            template: createTokenTemplate,\r\n        });\r\n\r\n        // Generate transfer content\r\n        const content = await generateObject({\r\n            runtime,\r\n            context: transferContext,\r\n            modelClass: ModelClass.SMALL,\r\n            schema: createTokenSchema,\r\n        });\r\n\r\n        const payload = content.object as CreateTokenContent;\r\n\r\n        // Validate transfer content\r\n        if (!isCreateTokenContent(runtime, payload)) {\r\n            console.error(\"Invalid content for CREATE_TOKEN action.\");\r\n            if (callback) {\r\n                callback({\r\n                    text: \"Unable to process transfer request. Invalid content provided.\",\r\n                    content: { error: \"Invalid transfer content\" },\r\n                });\r\n            }\r\n            return false;\r\n        }\r\n\r\n        try {\r\n            const privateKey = runtime.getSetting(\"MVX_PRIVATE_KEY\");\r\n            const network = runtime.getSetting(\"MVX_NETWORK\");\r\n\r\n            const walletProvider = new WalletProvider(privateKey, network);\r\n\r\n            await walletProvider.createESDT({\r\n                tokenName: payload.tokenName,\r\n                amount: payload.amount,\r\n                decimals: Number(payload.decimals) || 18,\r\n                tokenTicker: payload.tokenTicker,\r\n            });\r\n            return true;\r\n        } catch (error) {\r\n            console.error(\"Error during creating token:\", error);\r\n            if (callback) {\r\n                callback({\r\n                    text: `Error creating token: ${error.message}`,\r\n                    content: { error: error.message },\r\n                });\r\n            }\r\n            return false;\r\n        }\r\n    },\r\n\r\n    examples: [\r\n        [\r\n            {\r\n                user: \"{{user1}}\",\r\n                content: {\r\n                    text: \"Create a token XTREME with ticker XTR and supply of 10000\",\r\n                    action: \"CREATE_TOKEN\",\r\n                },\r\n            },\r\n            {\r\n                user: \"{{user2}}\",\r\n                content: {\r\n                    text: \"Succesfully created token.\",\r\n                },\r\n            },\r\n        ],\r\n        [\r\n            {\r\n                user: \"{{user1}}\",\r\n                content: {\r\n                    text: \"Create a token TEST with ticker TST, 18 decimals and supply of 10000\",\r\n                    action: \"CREATE_TOKEN\",\r\n                },\r\n            },\r\n            {\r\n                user: \"{{user2}}\",\r\n                content: {\r\n                    text: \"Succesfully created token.\",\r\n                },\r\n            },\r\n        ],\r\n    ] as ActionExample[][],\r\n} as Action;\r\n","import { Plugin } from \"@elizaos/core\";\r\nimport transfer from \"./actions/transfer\";\r\nimport createToken from \"./actions/createToken\";\r\n\r\nexport const multiversxPlugin: Plugin = {\r\n    name: \"multiversx\",\r\n    description: \"MultiversX Plugin for Eliza\",\r\n    actions: [transfer, createToken],\r\n    evaluators: [],\r\n    providers: [],\r\n};\r\n\r\nexport default multiversxPlugin;\r\n"],"mappings":"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","names":["elizaLogger","config","config","z","elizaLogger","elizaLogger","ModelClass","generateObject","composeContext","elizaLogger","composeContext","generateObject","ModelClass"]}