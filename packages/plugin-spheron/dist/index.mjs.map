{"version":3,"sources":["../src/actions/escrow.ts","../src/environment.ts","../src/utils/index.ts","../src/utils/constants.ts","../src/actions/deployment.ts","../src/utils/template.ts","../src/providers/tokens.ts","../src/providers/deployment.ts","../src/index.ts"],"sourcesContent":["import {\r\n    Action,\r\n    ActionExample,\r\n    IAgentRuntime,\r\n    Memory,\r\n    State,\r\n    HandlerCallback,\r\n    elizaLogger,\r\n    composeContext,\r\n    ModelClass,\r\n    generateObjectDeprecated,\r\n} from \"@elizaos/core\";\r\nimport { validateSpheronConfig } from \"../environment.ts\";\r\nimport {\r\n    depositBalance,\r\n    getUserBalance,\r\n    withdrawBalance,\r\n} from \"../utils/index.ts\";\r\nimport { EscrowContent } from \"../types/index.ts\";\r\nimport { SUPPORTED_TOKENS } from \"../utils/constants.ts\";\r\n\r\nfunction isEscrowContent(content: any): content is EscrowContent {\r\n    console.log(\"Content for escrow operation:\", content);\r\n    return (\r\n        typeof content.token === \"string\" &&\r\n        (content.operation === \"deposit\" || content.operation === \"withdraw\"\r\n            ? typeof content.amount === \"number\" && content.amount > 0\r\n            : content.operation === \"check\") &&\r\n        (content.operation === \"deposit\" ||\r\n            content.operation === \"withdraw\" ||\r\n            content.operation === \"check\")\r\n    );\r\n}\r\n\r\nconst escrowTemplate = `Respond with a JSON markdown block containing only the extracted values\r\n- Use null for any values that cannot be determined.\r\n- Token must be one of the supported tokens.\r\n- Amount must be a positive number.\r\n\r\nExample response for checking balance for <token-symbol>:\r\n\\`\\`\\`json\r\n{\r\n    \"token\": \"<token-symbol>\", // can be USDT, USDC, DAI, WETH, CST\r\n    \"operation\": \"check\"\r\n}\r\n\\`\\`\\`\r\n\r\nExample response for depositing <amount> <token-symbol>:\r\n\\`\\`\\`json\r\n{\r\n    \"token\": \"<token-symbol>\", // can be USDT, USDC, DAI, WETH, CST\r\n    \"amount\": <amount>, // must be a positive number\r\n    \"operation\": \"deposit\"\r\n}\r\n\\`\\`\\`\r\n\r\nExample response for withdrawing <amount> <token-symbol>:\r\n\\`\\`\\`json\r\n{\r\n    \"token\": \"<token-symbol>\", // can be USDT, USDC, DAI, WETH, CST\r\n    \"amount\": <amount>, // must be a positive number\r\n    \"operation\": \"withdraw\" // must be one of the supported operations\r\n}\r\n\\`\\`\\`\r\n\r\n## Supported Tokens\r\n${Object.entries(SUPPORTED_TOKENS)\r\n    .map(([key, _]) => `- ${key}`)\r\n    .join(\"\\n\")}\r\n\r\n{{recentMessages}}\r\n\r\nGiven the recent messages, extract the following information about the requested escrow operation:\r\n- Token symbol (must be one of the supported tokens)\r\n- Amount to deposit/withdraw (must be a positive number)\r\n- Operation type (deposit or withdraw)\r\n- Don't mention multiple operations in the same json block\r\n\r\nRespond with a JSON markdown block containing only the extracted values.`;\r\n\r\nexport default {\r\n    name: \"ESCROW_OPERATION\",\r\n    similes: [\r\n        \"DEPOSIT_TOKEN\",\r\n        \"WITHDRAW_TOKEN\",\r\n        \"CHECK_BALANCE\",\r\n        \"GET_BALANCE\",\r\n        \"DEPOSIT_FUNDS\",\r\n        \"WITHDRAW_FUNDS\",\r\n        \"ADD_FUNDS\",\r\n        \"REMOVE_FUNDS\",\r\n        \"TRANSFER_TO_ESCROW\",\r\n        \"TRANSFER_FROM_ESCROW\",\r\n        \"FUND_ACCOUNT\",\r\n        \"WITHDRAW_FROM_ACCOUNT\",\r\n    ],\r\n    description:\r\n        \"MUST use this action if the user requests to deposit or withdraw tokens from escrow. The request might vary, but it will always be related to escrow operations.\",\r\n    validate: async (runtime: IAgentRuntime, _message: Memory) => {\r\n        await validateSpheronConfig(runtime);\r\n        return true;\r\n    },\r\n    handler: async (\r\n        runtime: IAgentRuntime,\r\n        message: Memory,\r\n        state: State,\r\n        _options: { [key: string]: unknown },\r\n        callback?: HandlerCallback\r\n    ) => {\r\n        elizaLogger.log(\"Starting ESCROW_OPERATION handler...\");\r\n\r\n        // Initialize or update state\r\n        if (!state) {\r\n            state = (await runtime.composeState(message)) as State;\r\n        } else {\r\n            state = await runtime.updateRecentMessageState(state);\r\n        }\r\n\r\n        // Filter only \"just now\" and last couple of user messages\r\n        state.recentMessages = state.recentMessages\r\n            .split(\"\\n\")\r\n            .filter(\r\n                (line) => line.includes(\"(just now)\") || line.includes(\"(user)\")\r\n            )\r\n            .slice(-2)\r\n            .join(\"\\n\");\r\n\r\n        // Compose escrow context\r\n        const escrowContext = composeContext({\r\n            state,\r\n            template: escrowTemplate,\r\n        });\r\n\r\n        // Generate escrow content\r\n        const content = await generateObjectDeprecated({\r\n            runtime,\r\n            context: escrowContext,\r\n            modelClass: ModelClass.SMALL,\r\n        });\r\n\r\n        // Validate escrow content\r\n        if (!isEscrowContent(content)) {\r\n            elizaLogger.error(\"Invalid content for ESCROW_OPERATION action.\");\r\n            callback?.({\r\n                text: \"Unable to process escrow request. Invalid content provided.\",\r\n                content: { error: \"Invalid escrow content\" },\r\n            });\r\n            return false;\r\n        }\r\n\r\n        try {\r\n            const config = await validateSpheronConfig(runtime);\r\n            const balance = await getUserBalance(\r\n                runtime,\r\n                content.token,\r\n                config.WALLET_ADDRESS\r\n            );\r\n            elizaLogger.log(`Current ${content.token} balance:`, balance);\r\n\r\n            if (content.operation === \"check\") {\r\n                const formattedAvailableBalance =\r\n                    Number(balance.unlockedBalance) /\r\n                    10 ** Number(balance.token.decimal);\r\n                const formattedLockedBalance =\r\n                    Number(balance.lockedBalance) /\r\n                    10 ** Number(balance.token.decimal);\r\n                callback?.({\r\n                    text: `Current ${content.token.toUpperCase()} Balance for ${config.WALLET_ADDRESS}\\n Available balance: ${formattedAvailableBalance.toFixed(2)} ${content.token.toUpperCase()}\\n Locked balance: ${formattedLockedBalance.toFixed(2)} ${content.token.toUpperCase()}`,\r\n                    content: {\r\n                        success: true,\r\n                        unlockedBalance: formattedAvailableBalance,\r\n                        lockedBalance: formattedLockedBalance,\r\n                        token: balance.token,\r\n                        walletAddress: config.WALLET_ADDRESS,\r\n                    },\r\n                });\r\n            } else if (content.operation === \"deposit\") {\r\n                try {\r\n                    const result = await depositBalance(\r\n                        runtime,\r\n                        content.token,\r\n                        content.amount\r\n                    );\r\n                    callback?.({\r\n                        text: `Successfully deposited ${content.amount} ${content.token.toUpperCase()} into Spheron Escrow for ${config.WALLET_ADDRESS}`,\r\n                        content: {\r\n                            success: true,\r\n                            transaction: result,\r\n                            operation: \"deposit\",\r\n                            token: content.token,\r\n                            amount: content.amount,\r\n                            newBalance: await getUserBalance(\r\n                                runtime,\r\n                                content.token,\r\n                                config.WALLET_ADDRESS\r\n                            ),\r\n                            walletAddress: config.WALLET_ADDRESS,\r\n                        },\r\n                    });\r\n                } catch (error) {\r\n                    elizaLogger.error(\"Deposit operation failed:\", error);\r\n                    callback?.({\r\n                        text: `Failed to deposit ${content.amount} ${content.token.toUpperCase()}: ${error instanceof Error ? error.message : \"Unknown error\"}`,\r\n                        content: {\r\n                            success: false,\r\n                            operation: \"deposit\",\r\n                            token: content.token,\r\n                            amount: content.amount,\r\n                            error:\r\n                                error instanceof Error\r\n                                    ? error.message\r\n                                    : \"Unknown error\",\r\n                        },\r\n                    });\r\n                    return false;\r\n                }\r\n            } else if (content.operation === \"withdraw\") {\r\n                try {\r\n                    const result = await withdrawBalance(\r\n                        runtime,\r\n                        content.token,\r\n                        content.amount\r\n                    );\r\n                    callback?.({\r\n                        text: `Successfully withdrew ${content.amount} ${content.token.toUpperCase()} from Spheron Escrow for ${config.WALLET_ADDRESS}`,\r\n                        content: {\r\n                            success: true,\r\n                            transaction: result,\r\n                            operation: \"withdraw\",\r\n                            token: content.token,\r\n                            amount: content.amount,\r\n                            newBalance: await getUserBalance(\r\n                                runtime,\r\n                                content.token,\r\n                                config.WALLET_ADDRESS\r\n                            ),\r\n                            walletAddress: config.WALLET_ADDRESS,\r\n                        },\r\n                    });\r\n                } catch (error) {\r\n                    elizaLogger.error(\"Withdraw operation failed:\", error);\r\n                    callback?.({\r\n                        text: `Failed to withdraw ${content.amount} ${content.token.toUpperCase()}: ${error instanceof Error ? error.message : \"Unknown error\"}`,\r\n                        content: {\r\n                            success: false,\r\n                            operation: \"withdraw\",\r\n                            token: content.token,\r\n                            amount: content.amount,\r\n                            error:\r\n                                error instanceof Error\r\n                                    ? error.message\r\n                                    : \"Unknown error\",\r\n                        },\r\n                    });\r\n                    return false;\r\n                }\r\n            } else {\r\n                throw new Error(\"Invalid operation\");\r\n            }\r\n\r\n            return true;\r\n        } catch (error) {\r\n            elizaLogger.error(\"Escrow operation failed:\", error);\r\n            callback?.({\r\n                text: \"Escrow operation failed\",\r\n                content: {\r\n                    error:\r\n                        error instanceof Error\r\n                            ? error.message\r\n                            : \"Unknown error\",\r\n                },\r\n            });\r\n            return false;\r\n        }\r\n    },\r\n    examples: [\r\n        [\r\n            {\r\n                user: \"{{user1}}\",\r\n                content: {\r\n                    text: \"Deposit 100 USDT into escrow\",\r\n                },\r\n            },\r\n            {\r\n                user: \"{{agentName}}\",\r\n                content: {\r\n                    text: \"Processing your deposit of 100 USDT...\",\r\n                    action: \"ESCROW_OPERATION\",\r\n                },\r\n            },\r\n        ],\r\n        [\r\n            {\r\n                user: \"{{user1}}\",\r\n                content: {\r\n                    text: \"Withdraw 50 USDC from my balance\",\r\n                },\r\n            },\r\n            {\r\n                user: \"{{agentName}}\",\r\n                content: {\r\n                    text: \"Processing your withdrawal of 50 USDC...\",\r\n                    action: \"ESCROW_OPERATION\",\r\n                },\r\n            },\r\n        ],\r\n        [\r\n            {\r\n                user: \"{{user1}}\",\r\n                content: {\r\n                    text: \"Add 200 DAI to my account\",\r\n                },\r\n            },\r\n            {\r\n                user: \"{{agentName}}\",\r\n                content: {\r\n                    text: \"Processing your deposit of 200 DAI...\",\r\n                    action: \"ESCROW_OPERATION\",\r\n                },\r\n            },\r\n        ],\r\n        [\r\n            {\r\n                user: \"{{user1}}\",\r\n                content: {\r\n                    text: \"Check agent's escrow USDT balance\",\r\n                },\r\n            },\r\n            {\r\n                user: \"{{agentName}}\",\r\n                content: {\r\n                    text: \"Checking your USDT balance...\",\r\n                    action: \"ESCROW_OPERATION\",\r\n                },\r\n            },\r\n        ],\r\n        [\r\n            {\r\n                user: \"{{user1}}\",\r\n                content: {\r\n                    text: \"How much DAI do I have in agent's escrow?\",\r\n                },\r\n            },\r\n            {\r\n                user: \"{{agentName}}\",\r\n                content: {\r\n                    text: \"Let me check your DAI balance...\",\r\n                    action: \"ESCROW_OPERATION\",\r\n                },\r\n            },\r\n        ],\r\n        [\r\n            {\r\n                user: \"{{user1}}\",\r\n                content: {\r\n                    text: \"Transfer 75 USDC to escrow\",\r\n                },\r\n            },\r\n            {\r\n                user: \"{{agentName}}\",\r\n                content: {\r\n                    text: \"Processing your deposit of 75 USDC...\",\r\n                    action: \"ESCROW_OPERATION\",\r\n                },\r\n            },\r\n        ],\r\n        [\r\n            {\r\n                user: \"{{user1}}\",\r\n                content: {\r\n                    text: \"I want to remove 150 DAI from escrow\",\r\n                },\r\n            },\r\n            {\r\n                user: \"{{agentName}}\",\r\n                content: {\r\n                    text: \"Processing your withdrawal of 150 DAI...\",\r\n                    action: \"ESCROW_OPERATION\",\r\n                },\r\n            },\r\n        ],\r\n    ] as ActionExample[][],\r\n} as Action;\r\n","import { IAgentRuntime } from \"@elizaos/core\";\r\nimport { z } from \"zod\";\r\n\r\nexport const spheronEnvSchema = z.object({\r\n    PRIVATE_KEY: z.string().min(1, \"Private key is required\"),\r\n    PROVIDER_PROXY_URL: z\r\n        .string()\r\n        .url(\"Provider proxy URL must be a valid URL\"),\r\n    WALLET_ADDRESS: z.string().min(1, \"Wallet address is required\"),\r\n    SPHERON_PROXY_PORT: z.string().optional(),\r\n});\r\n\r\nexport const requiredEnvVars = [\r\n    \"SPHERON_PRIVATE_KEY\",\r\n    \"SPHERON_WALLET_ADDRESS\",\r\n    \"SPHERON_PROVIDER_PROXY_URL\",\r\n] as const;\r\n\r\nexport type SpheronConfig = z.infer<typeof spheronEnvSchema>;\r\n\r\nexport async function validateSpheronConfig(\r\n    runtime: IAgentRuntime\r\n): Promise<SpheronConfig> {\r\n    try {\r\n        const config = {\r\n            PRIVATE_KEY:\r\n                runtime.getSetting(\"PRIVATE_KEY\") ||\r\n                process.env.SPHERON_PRIVATE_KEY ||\r\n                process.env.PRIVATE_KEY,\r\n            PROVIDER_PROXY_URL:\r\n                runtime.getSetting(\"PROVIDER_PROXY_URL\") ||\r\n                process.env.SPHERON_PROVIDER_PROXY_URL ||\r\n                process.env.PROVIDER_PROXY_URL,\r\n            WALLET_ADDRESS:\r\n                runtime.getSetting(\"WALLET_ADDRESS\") ||\r\n                process.env.SPHERON_WALLET_ADDRESS ||\r\n                process.env.WALLET_ADDRESS,\r\n        };\r\n\r\n        return spheronEnvSchema.parse(config);\r\n    } catch (error) {\r\n        if (error instanceof z.ZodError) {\r\n            const errorMessages = error.errors\r\n                .map((err) => `${err.path.join(\".\")}: ${err.message}`)\r\n                .join(\"\\n\");\r\n            throw new Error(\r\n                `Spheron configuration validation failed:\\n${errorMessages}`\r\n            );\r\n        }\r\n        throw error;\r\n    }\r\n}\r\n","import { IAgentRuntime, elizaLogger } from \"@elizaos/core\";\r\nimport { SpheronSDK } from \"@spheron/protocol-sdk\";\r\nimport { validateSpheronConfig } from \"../environment.ts\";\r\nimport {\r\n    BalanceInfo,\r\n    DeploymentDetails,\r\n    SpheronComputeConfig,\r\n} from \"../types/index.ts\";\r\n\r\nexport const getSDKInstance = async (\r\n    runtime: IAgentRuntime\r\n): Promise<SpheronSDK> => {\r\n    const config = await validateSpheronConfig(runtime);\r\n    return new SpheronSDK(\"testnet\", config.PRIVATE_KEY);\r\n};\r\n\r\n// Escrow Operations\r\nexport const getUserBalance = async (\r\n    runtime: IAgentRuntime,\r\n    token: string,\r\n    walletAddress?: string\r\n): Promise<BalanceInfo> => {\r\n    const sdk = await getSDKInstance(runtime);\r\n    return await sdk.escrow.getUserBalance(token, walletAddress);\r\n};\r\n\r\nexport const depositBalance = async (\r\n    runtime: IAgentRuntime,\r\n    token: string,\r\n    amount: number\r\n): Promise<any> => {\r\n    const sdk = await getSDKInstance(runtime);\r\n    return await sdk.escrow.depositBalance({\r\n        token,\r\n        amount,\r\n        onFailureCallback: (error) => {\r\n            elizaLogger.error(\"Deposit failed: \", error);\r\n            throw error;\r\n        },\r\n    });\r\n};\r\n\r\nexport const withdrawBalance = async (\r\n    runtime: IAgentRuntime,\r\n    token: string,\r\n    amount: number\r\n): Promise<any> => {\r\n    const sdk = await getSDKInstance(runtime);\r\n    return await sdk.escrow.withdrawBalance({\r\n        token,\r\n        amount,\r\n        onFailureCallback: (error) => {\r\n            elizaLogger.error(\"Withdrawal failed:\", error);\r\n            throw error;\r\n        },\r\n    });\r\n};\r\n\r\n// Deployment Operations\r\nexport const startDeployment = async (\r\n    runtime: IAgentRuntime,\r\n    computeConfig: SpheronComputeConfig\r\n): Promise<any> => {\r\n    // Check balance before deployment\r\n    const token = computeConfig.token || \"CST\";\r\n    const balance = await getUserBalance(runtime, token);\r\n\r\n    // Ensure unlockedBalance and decimals exist and are valid\r\n    if (!balance.unlockedBalance || !balance.token?.decimal) {\r\n        throw new Error(\"Invalid balance info structure\");\r\n    }\r\n\r\n    const unlockedBalance = BigInt(balance.unlockedBalance);\r\n    const decimal = BigInt(balance.token.decimal);\r\n    const divisor = BigInt(10) ** decimal;\r\n\r\n    // Calculate withdrawal amount and convert to string with proper decimal places\r\n    const balanceAmount = Number(unlockedBalance) / Number(divisor);\r\n\r\n    const requiredAmount =\r\n        calculateGPUPrice(computeConfig.computeResources?.gpu) *\r\n        (computeConfig.duration ? parseDuration(computeConfig.duration) : 1);\r\n\r\n    if (balanceAmount < requiredAmount) {\r\n        throw new Error(\r\n            `Insufficient balance. Available: ${balanceAmount} ${token}, Required: ${requiredAmount} ${token}`\r\n        );\r\n    }\r\n\r\n    const result = await createOrder(runtime, generateICLYaml(computeConfig));\r\n    // Wait for new deployment to be ready\r\n    let isReady = false;\r\n    const maxAttempts = 10; // 10 times with 10-second intervals\r\n    let attempts = 0;\r\n\r\n    while (!isReady && attempts < maxAttempts) {\r\n        const status = await getDeploymentStatus(\r\n            runtime,\r\n            result.leaseId.toString()\r\n        );\r\n        elizaLogger.debug(\r\n            `Deployment status (attempt ${attempts + 1}/${maxAttempts}):`,\r\n            status\r\n        );\r\n\r\n        if (status) {\r\n            isReady = true;\r\n        } else {\r\n            await new Promise((resolve) => setTimeout(resolve, 10000)); // Wait 10 seconds between checks\r\n            attempts++;\r\n        }\r\n    }\r\n\r\n    if (isReady) {\r\n        elizaLogger.log(\"Deployment ready\");\r\n    } else {\r\n        elizaLogger.error(`Deployment not ready after ${maxAttempts} attempts`);\r\n        throw new Error(\"Deployment timeout\");\r\n    }\r\n    return result;\r\n};\r\n\r\nexport const updateDeployment = async (\r\n    runtime: IAgentRuntime,\r\n    leaseId: string,\r\n    computeConfig: SpheronComputeConfig\r\n): Promise<any> => {\r\n    // Check balance before deployment update\r\n    const token = computeConfig.token || \"CST\";\r\n    const balance = await getUserBalance(runtime, token);\r\n\r\n    // Ensure unlockedBalance and decimals exist and are valid\r\n    if (!balance.unlockedBalance || !balance.token?.decimal) {\r\n        throw new Error(\"Invalid balance info structure\");\r\n    }\r\n\r\n    const unlockedBalance = BigInt(balance.unlockedBalance);\r\n    const decimal = BigInt(balance.token.decimal);\r\n    const divisor = BigInt(10) ** decimal;\r\n\r\n    // Calculate withdrawal amount and convert to string with proper decimal places\r\n    const balanceAmount = Number(unlockedBalance) / Number(divisor);\r\n\r\n    const requiredAmount =\r\n        calculateGPUPrice(computeConfig.computeResources?.gpu) *\r\n        (computeConfig.duration ? parseDuration(computeConfig.duration) : 1);\r\n\r\n    if (balanceAmount < requiredAmount) {\r\n        throw new Error(\r\n            `Insufficient balance. Available: ${balanceAmount} ${token}, Required: ${requiredAmount} ${token}`\r\n        );\r\n    }\r\n\r\n    const result = await updateOrder(\r\n        runtime,\r\n        leaseId.toString(),\r\n        generateICLYaml(computeConfig)\r\n    );\r\n\r\n    // Wait for new deployment to be ready\r\n    let isReady = false;\r\n    const maxAttempts = 10; // 10 times with 10-second intervals\r\n    let attempts = 0;\r\n\r\n    while (!isReady && attempts < maxAttempts) {\r\n        const status = await getDeploymentStatus(runtime, leaseId.toString());\r\n        elizaLogger.debug(\r\n            `Deployment status (attempt ${attempts + 1}/${maxAttempts}):`,\r\n            status\r\n        );\r\n\r\n        if (status) {\r\n            isReady = true;\r\n        } else {\r\n            await new Promise((resolve) => setTimeout(resolve, 10000)); // Wait 10 seconds between checks\r\n            attempts++;\r\n        }\r\n    }\r\n\r\n    if (isReady) {\r\n        elizaLogger.log(\"Deployment ready\");\r\n    } else {\r\n        elizaLogger.error(`Deployment not ready after ${maxAttempts} attempts`);\r\n        throw new Error(\"Deployment timeout\");\r\n    }\r\n    return result;\r\n};\r\n\r\nexport const createOrder = async (\r\n    runtime: IAgentRuntime,\r\n    iclYaml: string\r\n): Promise<{ leaseId: string; transaction: any }> => {\r\n    elizaLogger.debug(\"Creating order with iclYaml:\", iclYaml);\r\n    const sdk = await getSDKInstance(runtime);\r\n    const config = await validateSpheronConfig(runtime);\r\n    return await sdk.deployment.createDeployment(\r\n        iclYaml,\r\n        config.PROVIDER_PROXY_URL\r\n    );\r\n};\r\n\r\nexport const updateOrder = async (\r\n    runtime: IAgentRuntime,\r\n    leaseId: string,\r\n    iclYaml: string\r\n): Promise<{ providerAddress: string }> => {\r\n    const sdk = await getSDKInstance(runtime);\r\n    const config = await validateSpheronConfig(runtime);\r\n    return await sdk.deployment.updateDeployment(\r\n        leaseId,\r\n        iclYaml,\r\n        config.PROVIDER_PROXY_URL\r\n    );\r\n};\r\n\r\nexport const getDeployment = async (\r\n    runtime: IAgentRuntime,\r\n    leaseId: string\r\n): Promise<DeploymentDetails> => {\r\n    elizaLogger.debug(\"Getting deployment with lease ID:\", leaseId);\r\n    const sdk = await getSDKInstance(runtime);\r\n    const config = await validateSpheronConfig(runtime);\r\n    return await sdk.deployment.getDeployment(\r\n        leaseId,\r\n        config.PROVIDER_PROXY_URL\r\n    );\r\n};\r\n\r\nexport const closeDeployment = async (\r\n    runtime: IAgentRuntime,\r\n    leaseId: string\r\n): Promise<any> => {\r\n    const sdk = await getSDKInstance(runtime);\r\n    return await sdk.deployment.closeDeployment(leaseId);\r\n};\r\n\r\nexport async function getDeploymentStatus(\r\n    runtime: IAgentRuntime,\r\n    deploymentId: string\r\n): Promise<boolean> {\r\n    try {\r\n        const deployment = await getDeployment(runtime, deploymentId);\r\n        const service = Object.values(deployment.services)[0];\r\n        return service.ready_replicas === service.total;\r\n    } catch (error: any) {\r\n        throw new Error(`Failed to get deployment status: ${error.message}`);\r\n    }\r\n}\r\n\r\nfunction calculateGPUPrice(gpu?: { model?: string; count?: number }): number {\r\n    if (!gpu) return 1;\r\n\r\n    const basePrice = (() => {\r\n        switch (gpu.model?.toLowerCase()) {\r\n            // Consumer GPUs\r\n            case \"rtx4090\":\r\n                return 0.7;\r\n            case \"rtx3090\":\r\n                return 0.5;\r\n            case \"rtx3080\":\r\n                return 0.4;\r\n            case \"rtx3070\":\r\n                return 0.3;\r\n            // Data Center GPUs\r\n            case \"h100\":\r\n                return 3.0;\r\n            case \"a100\":\r\n                return 1.5;\r\n            case \"a40\":\r\n                return 1.2;\r\n            case \"a30\":\r\n                return 1.2;\r\n            case \"a16\":\r\n                return 1.0;\r\n            // Default case\r\n            default:\r\n                return 0.5;\r\n        }\r\n    })();\r\n\r\n    return basePrice * (gpu.count || 1);\r\n}\r\n\r\nexport function generateICLYaml(config: SpheronComputeConfig): string {\r\n    return `version: \"1.0\"\r\nservices:\r\n  ${config.name}:\r\n    image: ${config.image}\r\n    ${\r\n        config.ports\r\n            ? `expose:\r\n      ${config.ports\r\n          .map(\r\n              (p) => `- port: ${p.containerPort}\r\n        as: ${p.servicePort}\r\n        to:\r\n          - global: true`\r\n          )\r\n          .join(\"\\n      \")}`\r\n            : \"\"\r\n    }\r\n    ${\r\n        config.env\r\n            ? `env:\r\n      ${config.env.map((e) => `- ${e.name}=${e.value}`).join(\"\\n      \")}`\r\n            : \"\"\r\n    }\r\nprofiles:\r\n  name: ${config.name}\r\n  duration: ${config.duration || \"24h\"}\r\n  mode: ${config.mode || \"provider\"}\r\n  tier:\r\n    - community\r\n  compute:\r\n    ${config.name}:\r\n      resources:\r\n        cpu:\r\n          units: ${config.computeResources?.cpu || 2}\r\n        memory:\r\n          size: ${config.computeResources?.memory || \"2Gi\"}\r\n        storage:\r\n          - size: ${config.computeResources?.storage || \"10Gi\"}\r\n        ${\r\n            config.computeResources?.gpu\r\n                ? `gpu:\r\n          units: ${config.computeResources?.gpu?.count || 1}\r\n          attributes:\r\n            vendor:\r\n              nvidia:\r\n                - model: ${config.computeResources?.gpu?.model || \"rtx4090\"}`\r\n                : \"\"\r\n        }\r\n  placement:\r\n    westcoast:\r\n      pricing:\r\n        ${config.name}:\r\n          token: ${config.token || \"CST\"}\r\n          amount: ${calculateGPUPrice(config.computeResources?.gpu)}\r\ndeployment:\r\n  ${config.name}:\r\n    westcoast:\r\n      profile: ${config.name}\r\n      count: ${config.replicas || 1}`;\r\n}\r\n\r\nfunction parseDuration(duration: string): number {\r\n    const match = duration.match(/^(\\d*\\.?\\d+)(h|d|w|m)$/);\r\n    if (!match) {\r\n        throw new Error(\r\n            \"Invalid duration format. Expected format: number (can include decimals) followed by h(hours), d(days), w(weeks), or m(months)\"\r\n        );\r\n    }\r\n\r\n    const [, value, unit] = match;\r\n    const numValue = parseFloat(value);\r\n\r\n    switch (unit) {\r\n        case \"min\":\r\n            return numValue / 60;\r\n        case \"h\":\r\n            return numValue;\r\n        case \"d\":\r\n            return numValue * 24;\r\n        case \"w\":\r\n            return numValue * 7 * 24;\r\n        case \"m\":\r\n            return numValue * 30 * 24;\r\n        default:\r\n            return 1;\r\n    }\r\n}\r\n","export const SUPPORTED_TOKENS = {\r\n    USDT: \"USDT\",\r\n    USDC: \"USDC\",\r\n    DAI: \"DAI\",\r\n    WETH: \"WETH\",\r\n    CST: \"CST\",\r\n} as const;\r\n\r\nexport const DEPLOYMENT_CONFIGS = {\r\n    DEFAULT_PROVIDER_PROXY_URL: \"http://localhost:3040\",\r\n    NETWORK: \"testnet\",\r\n} as const;\r\n\r\nexport const LEASE_STATES = {\r\n    ACTIVE: \"ACTIVE\",\r\n    TERMINATED: \"TERMINATED\",\r\n} as const;\r\n\r\nexport const DEFAULT_PAGE_SIZE = 10;\r\n\r\nexport const AVAILABLE_GPU_MODELS = [\r\n    \"rtx4090\",\r\n    \"h100\",\r\n    \"rtx3090\",\r\n    \"t4\",\r\n    \"rtx4070tisuper\",\r\n    \"rtx4070\",\r\n    \"rtx4070ti\",\r\n    \"rtx6000-ada\",\r\n    \"t1000\",\r\n    \"a100\",\r\n    \"v100\",\r\n    \"p4\",\r\n];\r\n","import {\r\n    Action,\r\n    ActionExample,\r\n    IAgentRuntime,\r\n    Memory,\r\n    State,\r\n    HandlerCallback,\r\n    elizaLogger,\r\n    composeContext,\r\n    ModelClass,\r\n    generateObjectDeprecated,\r\n} from \"@elizaos/core\";\r\nimport { validateSpheronConfig } from \"../environment.ts\";\r\nimport {\r\n    getDeployment,\r\n    updateDeployment,\r\n    closeDeployment,\r\n    startDeployment,\r\n} from \"../utils/index.ts\";\r\nimport { DeploymentContent } from \"../types/index.ts\";\r\nimport { AVAILABLE_GPU_MODELS } from \"../utils/constants.ts\";\r\nimport { DEPLOYMENT_TEMPLATES } from \"../utils/template.ts\";\r\n\r\nfunction isDeploymentContent(content: any): content is DeploymentContent {\r\n    elizaLogger.debug(\"Content for deployment operation:\", content);\r\n    if (\r\n        typeof content.operation !== \"string\" ||\r\n        ![\"create\", \"update\", \"close\"].includes(content.operation)\r\n    ) {\r\n        return false;\r\n    }\r\n\r\n    switch (content.operation) {\r\n        case \"create\":\r\n            return (\r\n                typeof content.template === \"string\" &&\r\n                typeof content.customizations === \"object\"\r\n            );\r\n        case \"update\":\r\n            return (\r\n                typeof content.leaseId === \"string\" &&\r\n                typeof content.template === \"string\" &&\r\n                typeof content.customizations === \"object\"\r\n            );\r\n        case \"close\":\r\n            return typeof content.leaseId === \"string\";\r\n        default:\r\n            return false;\r\n    }\r\n}\r\n\r\n// Generate template descriptions dynamically\r\nconst templateDescriptions = Object.entries(DEPLOYMENT_TEMPLATES)\r\n    .map(([key, template]) => `- ${key}: ${template.description}`)\r\n    .join(\"\\n\");\r\n\r\nconst deploymentTemplate = `Respond with a JSON markdown block containing only the extracted values for the requested deployment operation.\r\n\r\nExample responses for different operations:\r\n\r\n1. Creating a new deployment:\r\n\\`\\`\\`json\r\n{\r\n    \"operation\": \"create\",\r\n    \"template\": \"<template-name>\",  // One of: jupyter-notebook, ollama-webui, vscode-pytorch\r\n    \"customizations\": {\r\n        \"cpu\": <true|false>,                // Extract CPU-only preference from context or put a default value of false. eg. no gpu needed or something like that\r\n        \"resources\": {               // Extract resource requirements from context\r\n            \"cpu\": \"<requested-cpu>\", // Extract cpu requirements from context or put a default value of 4\r\n            \"memory\": \"<requested-memory>\", // Extract memory requirements from context or put a default value of 8Gi\r\n            \"storage\": \"<requested-storage>\", // Extract storage requirements from context or put a default value of 100Gi\r\n            \"gpu\": \"<requested-gpu-count>\", // Extract gpu requirements from context or put a default value of 1\r\n            \"gpu_model\": \"<requested-gpu-model>\" // Extract gpu model requirements from context or put a default value of rtx4090\r\n        },\r\n        \"duration\": \"<requested-duration>\" // Extract duration requirements from context or put a default value of 1h\r\n        \"token\": \"<requested-token>\" // Extract token requirements from context or put a default value of CST\r\n        \"template\": {\r\n            \"heuristMinerAddress\": \"<requested-heurist-miner-address>\" // Extract heurist miner address requirements from context\r\n        }\r\n    }\r\n}\r\n\\`\\`\\`\r\n\r\n2. Updating an existing deployment:\r\n\\`\\`\\`json\r\n{\r\n    \"operation\": \"update\",\r\n    \"leaseId\": \"existing-lease-id\", // Extract lease ID from context\r\n    \"template\": \"<template-name>\", // One of: jupyter-notebook, ollama-webui, vscode-pytorch\r\n    \"customizations\": {\r\n        \"cpu\": <true|false>,   // Extract cpu-only preference from context or put a default value of false. eg. no gpu needed or something like that\r\n        \"resources\": {               // Extract updated resource requirements from context\r\n            \"cpu\": \"<requested-cpu>\", // Extract cpu requirements from context or put a default value of 4\r\n            \"memory\": \"<requested-memory>\", // Extract memory requirements from context or put a default value of 8Gi\r\n            \"storage\": \"<requested-storage>\", // Extract storage requirements from context or put a default value of 100Gi\r\n            \"gpu\": \"<requested-gpu-count>\", // Extract gpu requirements from context or put a default value of 1\r\n            \"gpu_model\": \"<requested-gpu-model>\" // Extract gpu model requirements from context or put a default value of rtx4090\r\n        },\r\n        \"duration\": \"<requested-duration>\" // Extract duration requirements from context or put a default value of 1h\r\n        \"token\": \"<requested-token>\" // Extract token requirements from context or put a default value of CST\r\n    }\r\n}\r\n\\`\\`\\`\r\n\r\n3. Closing a deployment:\r\n\\`\\`\\`json\r\n{\r\n    \"operation\": \"close\",\r\n    \"leaseId\": \"lease-id-to-close\"\r\n}\r\n\\`\\`\\`\r\n\r\n## Available Templates\r\n${templateDescriptions}\r\n\r\n## Available GPU Models\r\n${AVAILABLE_GPU_MODELS.map((gpu) => `- ${gpu}`).join(\"\\n\")}\r\n\r\n{{recentMessages}}\r\n\r\nGiven the recent messages, extract the following information about the requested deployment:\r\n- Desired template name from the context\r\n- CPU-only requirement (if specified) from the context\r\n- Any customization requirements GPU model and it's count, cpu and memory resources properly from the context\r\n- Token (if specified) from the context\r\n- Duration (if specified) from the context\r\n- Lease ID (if updating or closing) from the context\r\n- Operation (create, update, close) from the context\r\n\r\nRespond with a JSON markdown block containing only the extracted values.`;\r\n\r\nexport default {\r\n    name: \"DEPLOYMENT_OPERATION\",\r\n    similes: [\r\n        \"CREATE_DEPLOYMENT\",\r\n        \"UPDATE_DEPLOYMENT\",\r\n        \"GET_DEPLOYMENT\",\r\n        \"CLOSE_DEPLOYMENT\",\r\n        \"DEPLOY_SERVICE\",\r\n        \"MANAGE_DEPLOYMENT\",\r\n        \"LAUNCH_SERVICE\",\r\n        \"START_DEPLOYMENT\",\r\n        \"SETUP_DEPLOYMENT\",\r\n    ],\r\n    description:\r\n        \"MUST use this action if the user requests to create, update, or manage a deployment. The request might vary, but it will always be related to deployment operations.\",\r\n    validate: async (runtime: IAgentRuntime, _message: Memory) => {\r\n        await validateSpheronConfig(runtime);\r\n        return true;\r\n    },\r\n    handler: async (\r\n        runtime: IAgentRuntime,\r\n        message: Memory,\r\n        state: State,\r\n        _options: { [key: string]: unknown },\r\n        callback?: HandlerCallback\r\n    ) => {\r\n        elizaLogger.log(\"Starting DEPLOYMENT_OPERATION handler...\");\r\n\r\n        // Initialize or update state\r\n        if (!state) {\r\n            state = (await runtime.composeState(message)) as State;\r\n        } else {\r\n            state = await runtime.updateRecentMessageState(state);\r\n        }\r\n\r\n        // Filter only \"just now\" and last couple of user messages\r\n        state.recentMessages = state.recentMessages\r\n            .split(\"\\n\")\r\n            .filter(\r\n                (line) => line.includes(\"(just now)\") || line.includes(\"(user)\")\r\n            )\r\n            .slice(-2)\r\n            .join(\"\\n\");\r\n\r\n        // Compose deployment context\r\n        const deploymentContext = composeContext({\r\n            state,\r\n            template: deploymentTemplate,\r\n        });\r\n\r\n        // Generate deployment content\r\n        const content = await generateObjectDeprecated({\r\n            runtime,\r\n            context: deploymentContext,\r\n            modelClass: ModelClass.SMALL,\r\n        });\r\n\r\n        // Validate deployment content\r\n        if (!isDeploymentContent(content)) {\r\n            elizaLogger.error(\r\n                \"Invalid content for DEPLOYMENT_OPERATION action.\"\r\n            );\r\n            callback?.({\r\n                text: \"Unable to process deployment request. Invalid content provided.\",\r\n                content: { error: \"Invalid deployment content\" },\r\n            });\r\n            return false;\r\n        }\r\n\r\n        try {\r\n            switch (content.operation) {\r\n                case \"create\": {\r\n                    if (\r\n                        !content.template ||\r\n                        !DEPLOYMENT_TEMPLATES[content.template]\r\n                    ) {\r\n                        throw new Error(\r\n                            `Unsupported template: ${content.template}. Available templates are: ${Object.keys(DEPLOYMENT_TEMPLATES).join(\", \")}`\r\n                        );\r\n                    }\r\n\r\n                    const computeConfig = DEPLOYMENT_TEMPLATES[\r\n                        content.template\r\n                    ].config(content.customizations);\r\n                    const result = await startDeployment(\r\n                        runtime,\r\n                        computeConfig\r\n                    );\r\n\r\n                    elizaLogger.log(\r\n                        \"Deployment created with lease ID:\",\r\n                        result.leaseId.toString()\r\n                    );\r\n\r\n                    const deploymentDetails = await getDeployment(\r\n                        runtime,\r\n                        result.leaseId.toString()\r\n                    );\r\n                    const service = Object.values(\r\n                        deploymentDetails.services\r\n                    )[0];\r\n\r\n                    // Get forwarded ports information\r\n                    const ports =\r\n                        deploymentDetails.forwarded_ports[service.name] || [];\r\n                    const portInfo = ports\r\n                        .map(\r\n                            (p) =>\r\n                                `${p.host}:${p.externalPort} for Port ${p.port}`\r\n                        )\r\n                        .join(\", \");\r\n\r\n                    console.log(\"Final response:\", {\r\n                        text: `Deployment created and ready!\\nLease ID: ${result.leaseId.toString()}\\n${portInfo ? `Access URLs: ${portInfo}` : \"\"}`,\r\n                        content: {\r\n                            success: true,\r\n                            leaseId: result.leaseId.toString(),\r\n                            details: deploymentDetails,\r\n                            ports: ports,\r\n                        },\r\n                    });\r\n\r\n                    callback?.({\r\n                        text: `Deployment created and ready!\\nLease ID: ${result.leaseId.toString()}\\n${portInfo ? `Access URLs: ${portInfo}` : \"\"}`,\r\n                        content: {\r\n                            success: true,\r\n                            leaseId: result.leaseId.toString(),\r\n                            details: deploymentDetails,\r\n                            ports: ports,\r\n                        },\r\n                    });\r\n                    break;\r\n                }\r\n                case \"update\": {\r\n                    if (\r\n                        !content.leaseId ||\r\n                        !content.customizations ||\r\n                        !content.template\r\n                    ) {\r\n                        throw new Error(\r\n                            \"Lease ID, template, and customizations are required for deployment update\"\r\n                        );\r\n                    }\r\n\r\n                    if (!DEPLOYMENT_TEMPLATES[content.template]) {\r\n                        throw new Error(\r\n                            `Unsupported template: ${content.template}`\r\n                        );\r\n                    }\r\n\r\n                    const computeConfig = DEPLOYMENT_TEMPLATES[\r\n                        content.template\r\n                    ].config(content.customizations);\r\n                    const result = await updateDeployment(\r\n                        runtime,\r\n                        content.leaseId.toString(),\r\n                        computeConfig\r\n                    );\r\n                    elizaLogger.log(\r\n                        \"Deployment updated with lease ID:\",\r\n                        result.leaseId.toString()\r\n                    );\r\n\r\n                    const newDetails = await getDeployment(\r\n                        runtime,\r\n                        content.leaseId.toString()\r\n                    );\r\n                    callback?.({\r\n                        text: `Deployment ${content.leaseId.toString()} updated successfully`,\r\n                        content: {\r\n                            success: true,\r\n                            details: newDetails,\r\n                        },\r\n                    });\r\n                    break;\r\n                }\r\n                case \"close\": {\r\n                    if (!content.leaseId) {\r\n                        throw new Error(\r\n                            \"Lease ID is required for deployment closure\"\r\n                        );\r\n                    }\r\n                    const result = await closeDeployment(\r\n                        runtime,\r\n                        content.leaseId.toString()\r\n                    );\r\n                    elizaLogger.log(\r\n                        \"Deployment closed with lease ID:\",\r\n                        content.leaseId.toString()\r\n                    );\r\n\r\n                    callback?.({\r\n                        text: `Deployment ${content.leaseId.toString()} closed successfully`,\r\n                        content: {\r\n                            success: true,\r\n                            transaction: result,\r\n                        },\r\n                    });\r\n                    break;\r\n                }\r\n            }\r\n            return true;\r\n        } catch (error) {\r\n            console.log(\"Error:\", error);\r\n            elizaLogger.error(\"Deployment operation failed:\", error.message);\r\n            callback?.({\r\n                text: \"Deployment operation failed\",\r\n                content: {\r\n                    error:\r\n                        error instanceof Error\r\n                            ? error.message\r\n                            : \"Unknown error\",\r\n                },\r\n            });\r\n            return false;\r\n        }\r\n    },\r\n    examples: [\r\n        // Create deployment examples with templates\r\n        [\r\n            {\r\n                user: \"{{user1}}\",\r\n                content: {\r\n                    text: \"Deploy a Jupyter notebook with GPU\",\r\n                },\r\n            },\r\n            {\r\n                user: \"{{agentName}}\",\r\n                content: {\r\n                    text: \"Setting up your Jupyter notebook deployment with GPU support...\",\r\n                    action: \"DEPLOYMENT_OPERATION\",\r\n                },\r\n            },\r\n        ],\r\n        [\r\n            {\r\n                user: \"{{user1}}\",\r\n                content: {\r\n                    text: \"Create a CPU-only Jupyter notebook deployment\",\r\n                },\r\n            },\r\n            {\r\n                user: \"{{agentName}}\",\r\n                content: {\r\n                    text: \"Setting up your CPU-only Jupyter notebook deployment...\",\r\n                    action: \"DEPLOYMENT_OPERATION\",\r\n                },\r\n            },\r\n        ],\r\n        [\r\n            {\r\n                user: \"{{user1}}\",\r\n                content: {\r\n                    text: \"Deploy Jupyter notebook with A100 GPU and 32GB memory\",\r\n                },\r\n            },\r\n            {\r\n                user: \"{{agentName}}\",\r\n                content: {\r\n                    text: \"Setting up your Jupyter notebook deployment with A100 GPU and custom resources...\",\r\n                    action: \"DEPLOYMENT_OPERATION\",\r\n                },\r\n            },\r\n        ],\r\n        [\r\n            {\r\n                user: \"{{user1}}\",\r\n                content: {\r\n                    text: \"Deploy Ollama WebUI with RTX 4090\",\r\n                },\r\n            },\r\n            {\r\n                user: \"{{agentName}}\",\r\n                content: {\r\n                    text: \"Setting up Ollama WebUI with RTX 4090 GPU support...\",\r\n                    action: \"DEPLOYMENT_OPERATION\",\r\n                },\r\n            },\r\n        ],\r\n        [\r\n            {\r\n                user: \"{{user1}}\",\r\n                content: {\r\n                    text: \"Create a VS Code deployment with PyTorch and T4 GPU\",\r\n                },\r\n            },\r\n            {\r\n                user: \"{{agentName}}\",\r\n                content: {\r\n                    text: \"Setting up VS Code PyTorch environment with T4 GPU...\",\r\n                    action: \"DEPLOYMENT_OPERATION\",\r\n                },\r\n            },\r\n        ],\r\n        [\r\n            {\r\n                user: \"{{user1}}\",\r\n                content: {\r\n                    text: \"Deploy a Jupyter notebook with GPU and token USDT\",\r\n                },\r\n            },\r\n            {\r\n                user: \"{{agentName}}\",\r\n                content: {\r\n                    text: \"Setting up your Jupyter notebook deployment with GPU support and token USDT...\",\r\n                    action: \"DEPLOYMENT_OPERATION\",\r\n                },\r\n            },\r\n        ],\r\n        // Update deployment examples\r\n        [\r\n            {\r\n                user: \"{{user1}}\",\r\n                content: {\r\n                    text: \"Upgrade my deployment abc123 to use an A100 GPU\",\r\n                },\r\n            },\r\n            {\r\n                user: \"{{agentName}}\",\r\n                content: {\r\n                    text: \"Updating deployment abc123 to use A100 GPU...\",\r\n                    action: \"DEPLOYMENT_OPERATION\",\r\n                },\r\n            },\r\n        ],\r\n        [\r\n            {\r\n                user: \"{{user1}}\",\r\n                content: {\r\n                    text: \"Scale up the memory to 64GB for deployment xyz789\",\r\n                },\r\n            },\r\n            {\r\n                user: \"{{agentName}}\",\r\n                content: {\r\n                    text: \"Updating deployment resources...\",\r\n                    action: \"DEPLOYMENT_OPERATION\",\r\n                },\r\n            },\r\n        ],\r\n        [\r\n            {\r\n                user: \"{{user1}}\",\r\n                content: {\r\n                    text: \"Update my deployment abc123 to use an A100 GPU and token USDT\",\r\n                },\r\n            },\r\n            {\r\n                user: \"{{agentName}}\",\r\n                content: {\r\n                    text: \"Updating deployment abc123 to use A100 GPU and token USDT...\",\r\n                    action: \"DEPLOYMENT_OPERATION\",\r\n                },\r\n            },\r\n        ],\r\n        // Close deployment examples\r\n        [\r\n            {\r\n                user: \"{{user1}}\",\r\n                content: {\r\n                    text: \"Close deployment abc123\",\r\n                },\r\n            },\r\n            {\r\n                user: \"{{agentName}}\",\r\n                content: {\r\n                    text: \"Closing deployment abc123...\",\r\n                    action: \"DEPLOYMENT_OPERATION\",\r\n                },\r\n            },\r\n        ],\r\n        [\r\n            {\r\n                user: \"{{user1}}\",\r\n                content: {\r\n                    text: \"I want to stop my deployment abc123\",\r\n                },\r\n            },\r\n            {\r\n                user: \"{{agentName}}\",\r\n                content: {\r\n                    text: \"Closing deployment abc123...\",\r\n                    action: \"DEPLOYMENT_OPERATION\",\r\n                },\r\n            },\r\n        ],\r\n        [\r\n            {\r\n                user: \"{{user1}}\",\r\n                content: {\r\n                    text: \"Stop my Jupyter notebook deployment xyz789\",\r\n                },\r\n            },\r\n            {\r\n                user: \"{{agentName}}\",\r\n                content: {\r\n                    text: \"Terminating Jupyter notebook deployment xyz789...\",\r\n                    action: \"DEPLOYMENT_OPERATION\",\r\n                },\r\n            },\r\n        ],\r\n    ] as ActionExample[][],\r\n} as Action;\r\n","import { Customizations, SpheronComputeConfig } from \"../types/index.ts\";\r\n\r\ninterface TemplateDefinition {\r\n    description: string;\r\n    config: (customizations?: any) => SpheronComputeConfig;\r\n}\r\n\r\nexport const DEPLOYMENT_TEMPLATES: Record<string, TemplateDefinition> = {\r\n    \"jupyter-notebook\": {\r\n        description: \"Jupyter Notebook environment for AI development\",\r\n        config: (customizations: Customizations) => ({\r\n            name: \"jupyter\",\r\n            image: customizations.cpu\r\n                ? \"jupyter/minimal-notebook:latest\"\r\n                : \"quay.io/jupyter/pytorch-notebook:cuda12-pytorch-2.4.1\",\r\n            ports: [\r\n                {\r\n                    containerPort: 8888,\r\n                    servicePort: 8888,\r\n                },\r\n            ],\r\n            env: [\r\n                {\r\n                    name: \"JUPYTER_TOKEN\",\r\n                    value: \"spheron\",\r\n                },\r\n            ],\r\n            computeResources: {\r\n                cpu: customizations.resources?.cpu || 4,\r\n                memory: customizations.resources?.memory || \"8Gi\",\r\n                storage: customizations.resources?.storage || \"10Gi\",\r\n                ...(!customizations.cpu && {\r\n                    gpu: {\r\n                        count: customizations.resources?.gpu || 1,\r\n                        model: customizations.resources?.gpu_model || \"rtx4090\",\r\n                    },\r\n                }),\r\n            },\r\n            duration: customizations.duration || \"1d\",\r\n            token: customizations.token || \"CST\",\r\n        }),\r\n    },\r\n    \"ollama-webui\": {\r\n        description: \"Ollama Web UI for managing and interacting with LLMs\",\r\n        config: (customizations: Customizations) => ({\r\n            name: \"ollama-webui\",\r\n            image: \"ghcr.io/open-webui/open-webui:ollama\",\r\n            ports: [\r\n                {\r\n                    containerPort: 8080,\r\n                    servicePort: 8080,\r\n                },\r\n                {\r\n                    containerPort: 11434,\r\n                    servicePort: 11434,\r\n                },\r\n            ],\r\n            computeResources: {\r\n                cpu: customizations.resources?.cpu || 4,\r\n                memory: customizations.resources?.memory || \"8Gi\",\r\n                storage: customizations.resources?.storage || \"20Gi\",\r\n                ...(!customizations.cpu && {\r\n                    gpu: {\r\n                        count: customizations.resources?.gpu || 1,\r\n                        model: customizations.resources?.gpu_model || \"rtx4090\",\r\n                    },\r\n                }),\r\n            },\r\n            duration: customizations.duration || \"1d\",\r\n            token: customizations.token || \"CST\",\r\n        }),\r\n    },\r\n    \"vscode-pytorch\": {\r\n        description: \"VS Code Server with PyTorch development environment\",\r\n        config: (customizations: Customizations) => ({\r\n            name: \"vscode\",\r\n            image: customizations.cpu\r\n                ? \"lscr.io/linuxserver/code-server\"\r\n                : \"spheronnetwork/vscode-pytorch:latest\",\r\n            ports: [\r\n                {\r\n                    containerPort: 8443,\r\n                    servicePort: 8443,\r\n                },\r\n            ],\r\n            env: [\r\n                {\r\n                    name: \"PASSWORD\",\r\n                    value: \"spheron\",\r\n                },\r\n            ],\r\n            computeResources: {\r\n                cpu: customizations.resources?.cpu || 4,\r\n                memory: customizations.resources?.memory || \"8Gi\",\r\n                storage: customizations.resources?.storage || \"20Gi\",\r\n                ...(!customizations.cpu && {\r\n                    gpu: {\r\n                        count: customizations.resources?.gpu || 1,\r\n                        model: customizations.resources?.gpu_model || \"rtx4090\",\r\n                    },\r\n                }),\r\n            },\r\n            duration: customizations.duration || \"1d\",\r\n            token: customizations.token || \"CST\",\r\n        }),\r\n    },\r\n    \"heurist-miner\": {\r\n        description: \"Heurist Miner for mining Heurist network\",\r\n        config: (customizations: Customizations) => ({\r\n            name: \"heurist-miner\",\r\n            image: \"spheronnetwork/heurist-miner:latest\",\r\n            ports: [\r\n                {\r\n                    containerPort: 8888,\r\n                    servicePort: 8888,\r\n                },\r\n            ],\r\n            env: [\r\n                {\r\n                    name: \"MINER_ID_0\",\r\n                    value: customizations.template?.heuristMinerAddress || \"\",\r\n                },\r\n                {\r\n                    name: \"LOG_LEVEL\",\r\n                    value: \"INFO\",\r\n                },\r\n            ],\r\n            computeResources: {\r\n                cpu: customizations.resources?.cpu || 8,\r\n                memory: customizations.resources?.memory || \"16Gi\",\r\n                storage: customizations.resources?.storage || \"200Gi\",\r\n                ...(!customizations.cpu && {\r\n                    gpu: {\r\n                        count: customizations.resources?.gpu || 1,\r\n                        model: customizations.resources?.gpu_model || \"rtx4090\",\r\n                    },\r\n                }),\r\n            },\r\n            duration: customizations.duration || \"1d\",\r\n            token: customizations.token || \"CST\",\r\n        }),\r\n    },\r\n};\r\n","import {\r\n    IAgentRuntime,\r\n    Memory,\r\n    Provider,\r\n    State,\r\n    elizaLogger,\r\n} from \"@elizaos/core\";\r\nimport { SUPPORTED_TOKENS } from \"../utils/constants.ts\";\r\n\r\nexport const tokensProvider: Provider = {\r\n    get: async (_runtime: IAgentRuntime, _message: Memory, _state?: State) => {\r\n        elizaLogger.debug(\"tokensProvider::get\");\r\n        const tokens = Object.entries(SUPPORTED_TOKENS)\r\n            .map(([key, value]) => `${key}: ${value}`)\r\n            .join(\"\\n\");\r\n        return `The supported tokens for Spheron operations are:\\n${tokens}`;\r\n    },\r\n};\r\n","import {\r\n    IAgentRuntime,\r\n    Memory,\r\n    Provider,\r\n    State,\r\n    elizaLogger,\r\n} from \"@elizaos/core\";\r\nimport { DEPLOYMENT_CONFIGS } from \"../utils/constants.ts\";\r\n\r\nexport const deploymentProvider: Provider = {\r\n    get: async (_runtime: IAgentRuntime, _message: Memory, _state?: State) => {\r\n        elizaLogger.debug(\"deploymentProvider::get\");\r\n        const configs = Object.entries(DEPLOYMENT_CONFIGS)\r\n            .map(([key, value]) => `${key}: ${value}`)\r\n            .join(\"\\n\");\r\n        return `The deployment configuration settings are:\\n${configs}`;\r\n    },\r\n};\r\n","import { Plugin } from \"@elizaos/core\";\r\nimport escrow from \"./actions/escrow.ts\";\r\nimport deployment from \"./actions/deployment.ts\";\r\nimport { tokensProvider } from \"./providers/tokens.ts\";\r\nimport { deploymentProvider } from \"./providers/deployment.ts\";\r\nimport {\r\n    SUPPORTED_TOKENS,\r\n    DEPLOYMENT_CONFIGS,\r\n    LEASE_STATES,\r\n} from \"./utils/constants.ts\";\r\n\r\nexport const CONFIG = {\r\n    SUPPORTED_TOKENS,\r\n    DEPLOYMENT_CONFIGS,\r\n    LEASE_STATES,\r\n};\r\n\r\nexport const spheronPlugin: Plugin = {\r\n    name: \"spheron\",\r\n    description: \"Spheron Protocol Plugin for Eliza\",\r\n    actions: [escrow, deployment],\r\n    evaluators: [],\r\n    providers: [tokensProvider, deploymentProvider],\r\n};\r\n\r\nexport default spheronPlugin;\r\n\r\n// Export types\r\nexport * from \"./types/index.ts\";\r\nexport * from \"./environment.ts\";\r\nexport * from \"./utils/index.ts\";\r\n"],"mappings":"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","names":["elizaLogger","elizaLogger","elizaLogger","composeContext","ModelClass","generateObjectDeprecated","elizaLogger","composeContext","generateObjectDeprecated","ModelClass","elizaLogger","elizaLogger","elizaLogger","elizaLogger"]}